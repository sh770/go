<!DOCTYPE html>
<html lang="he">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>טיסה</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="confet.js"></script>
</head>

<body>
  <button onclick="startRaffle()">הפעלה</button>
  <div class="title">הזוכה הוא</div>
  <div id="raffle" class="blur"></div>
  <canvas id="confetti-canvas" style="position: absolute; display: block; z-index: 9; pointer-events: none" width="100%"
    height="1297"></canvas>



  <script>
    const users = [
      { name: "1. הרב סינגווי" },
      { name: "2. הרב סינגווי" },
      { name: "3. הרב סינגווי" },
      { name: "4. הרב סינגווי" },
      { name: "5. הרב סינגווי" },
      { name: "6. הרב סינגווי" },
      { name: "7. הרב סינגווי" },
      { name: "8. הרב סינגווי" },
      { name: "9. שלום הרפז" },
      { name: "10. שלום הרפז" },
      { name: "11. שלום הרפז" },
      { name: "12. שלום הרפז" },
      { name: "13. שלום הרפז" },
      { name: "14. שלום הרפז" },
      { name: "15. שלום הרפז" },
      { name: "16. לוי משי זהב" },
      { name: "17. לוי משי זהב" },
      { name: "18. לוי משי זהב" },
      { name: "19. לוי משי זהב" },
      { name: "20. לוי משי זהב" },
      { name: "21. לוי משי זהב" },
      { name: "22. דוד סימנטוב" },
      { name: "23. דוד סימנטוב" },
      { name: "24. דוד סימנטוב" },
      { name: "25. דוד סימנטוב" },
      { name: "26. ברוך דקל" },
      { name: "27. ברוך דקל" },
      { name: "28. ברוך דקל" },
      { name: "29. ברוך דקל" },
    ]
    let interval = undefined
    const startRaffle = () => {
      interval = setInterval(() => {
        const randomIdx = getRandomIntInclusive(0, users.length - 1)
        document.querySelector('#raffle').innerHTML = `${users[randomIdx].name}`
      }, 100)
      let runTime = getRandomIntInclusive(5000, 7000)
      setTimeout(() => {
        clearInterval(interval)
        document.querySelector('#raffle').classList.toggle('blur')
        document.querySelector('#raffle').classList.toggle('ended')
        startConfetti()
        setTimeout(() => {
          stopConfetti()
        }, 4500)
      }, runTime)
    }
    const getRandomIntInclusive = (min, max) => {
      min = Math.ceil(min)
      max = Math.floor(max)
      return Math.floor(Math.random() * (max - min + 1) + min)
    }

  </script>
</body>

</html>