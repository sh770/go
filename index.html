<!DOCTYPE html>
<html lang="he">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>הגרלה</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="confet.js"></script>
</head>

<body>
  <button onclick="startRaffle()">הפעלה</button>
  <div class="title">הזוכה הוא</div>
  <div id="raffle" class="blur"></div>
  <canvas id="confetti-canvas" style="position: absolute; display: block; z-index: 9; pointer-events: none" width="100%"
    height="1297"></canvas>



  <script>
    const users = [
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "הרפז" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "לוקי" },
      { name: "ישראל יהודה"},
      { name: "ישראל יהודה"},
      { name: "ישראל יהודה"},
      { name: "ישראל יהודה"},
      { name: "ישראל יהודה"},
      { name: "ישראל יהודה"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
      { name: "חיליק קופצ'יק"},
    ]
    let interval = undefined
    const startRaffle = () => {
      interval = setInterval(() => {
        const randomIdx = getRandomIntInclusive(0, users.length - 1)
        document.querySelector('#raffle').innerHTML = `${users[randomIdx].name}`
      }, 100)
      let runTime = getRandomIntInclusive(5000, 7000)
      setTimeout(() => {
        clearInterval(interval)
        document.querySelector('#raffle').classList.toggle('blur')
        document.querySelector('#raffle').classList.toggle('ended')
        startConfetti()
        setTimeout(() => {
          stopConfetti()
        }, 4500)
      }, runTime)
    }
    const getRandomIntInclusive = (min, max) => {
      min = Math.ceil(min)
      max = Math.floor(max)
      return Math.floor(Math.random() * (max - min + 1) + min)
    }

  </script>
</body>

</html>